{"ast":null,"code":"import { createContext } from 'react';\nimport { setAuthHeaders } from \"./api\";\nimport jwt_decode from 'jwt-decode';\nexport const UserContext = /*#__PURE__*/createContext(null);\nexport const loginAutomatically = () => {\n  const token = localStorage.getItem('token');\n  if (token === 'undefined') return false;\n  if (!token) return false;\n  const decoded = jwt_decode(token);\n  const now = Date.now() / 1000;\n\n  if (decoded.exp > now) {\n    setAuthHeaders(token);\n    return true;\n  }\n\n  return false;\n};\nexport const login = (token, avatar) => {\n  localStorage.setItem('token', token);\n  localStorage.setItem('avatar', avatar);\n  setAuthHeaders(token);\n};\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('avatar');\n  setAuthHeaders(null);\n  window.location.reload();\n};\nexport const getLogin = () => {\n  const token = localStorage.getItem('token');\n  if (token === 'undefined') return false;\n  if (!token) return false;\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace('-', '+').replace('_', '/');\n  return JSON.parse(window.atob(base64)).sub;\n};","map":{"version":3,"sources":["/Users/marcin/Desktop/flask-react-blog/frontend/src/services/user.js"],"names":["createContext","setAuthHeaders","jwt_decode","UserContext","loginAutomatically","token","localStorage","getItem","decoded","now","Date","exp","login","avatar","setItem","logout","removeItem","window","location","reload","getLogin","base64Url","split","base64","replace","JSON","parse","atob","sub"],"mappings":"AAAA,SAAQA,aAAR,QAA4B,OAA5B;AACA,SAAQC,cAAR,QAA6B,OAA7B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAO,MAAMC,WAAW,gBAAGH,aAAa,CAAC,IAAD,CAAjC;AAEP,OAAO,MAAMI,kBAAkB,GAAG,MAAM;AACpC,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAIF,KAAK,KAAK,WAAd,EAA2B,OAAO,KAAP;AAC3B,MAAG,CAACA,KAAJ,EAAW,OAAO,KAAP;AAEX,QAAMG,OAAO,GAAGN,UAAU,CAACG,KAAD,CAA1B;AACA,QAAMI,GAAG,GAAGC,IAAI,CAACD,GAAL,KAAW,IAAvB;;AACA,MAAGD,OAAO,CAACG,GAAR,GAAcF,GAAjB,EAAqB;AACjBR,IAAAA,cAAc,CAACI,KAAD,CAAd;AACA,WAAO,IAAP;AACH;;AAED,SAAO,KAAP;AACH,CAbM;AAeP,OAAO,MAAMO,KAAK,GAAG,CAACP,KAAD,EAAQQ,MAAR,KAAmB;AACpCP,EAAAA,YAAY,CAACQ,OAAb,CAAqB,OAArB,EAA8BT,KAA9B;AACAC,EAAAA,YAAY,CAACQ,OAAb,CAAqB,QAArB,EAA+BD,MAA/B;AACAZ,EAAAA,cAAc,CAACI,KAAD,CAAd;AACH,CAJM;AAMP,OAAO,MAAMU,MAAM,GAAG,MAAM;AACxBT,EAAAA,YAAY,CAACU,UAAb,CAAwB,OAAxB;AACAV,EAAAA,YAAY,CAACU,UAAb,CAAwB,QAAxB;AACAf,EAAAA,cAAc,CAAC,IAAD,CAAd;AACAgB,EAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,CALM;AAOP,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC1B,QAAMf,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACA,MAAIF,KAAK,KAAK,WAAd,EAA2B,OAAO,KAAP;AAC3B,MAAI,CAACA,KAAL,EAAY,OAAO,KAAP;AACZ,QAAMgB,SAAS,GAAGhB,KAAK,CAACiB,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAlB;AACA,QAAMC,MAAM,GAAGF,SAAS,CAACG,OAAV,CAAkB,GAAlB,EAAuB,GAAvB,EAA4BA,OAA5B,CAAoC,GAApC,EAAyC,GAAzC,CAAf;AACA,SAAOC,IAAI,CAACC,KAAL,CAAWT,MAAM,CAACU,IAAP,CAAYJ,MAAZ,CAAX,EAAgCK,GAAvC;AACH,CAPM","sourcesContent":["import {createContext} from 'react'\nimport {setAuthHeaders} from \"./api\";\nimport jwt_decode from 'jwt-decode'\n\nexport const UserContext = createContext(null);\n\nexport const loginAutomatically = () => {\n    const token = localStorage.getItem('token');\n    if (token === 'undefined') return false;\n    if(!token) return false;\n\n    const decoded = jwt_decode(token);\n    const now = Date.now()/1000;\n    if(decoded.exp > now){\n        setAuthHeaders(token);\n        return true;\n    }\n\n    return false;\n};\n\nexport const login = (token, avatar) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('avatar', avatar);\n    setAuthHeaders(token);\n};\n\nexport const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('avatar');\n    setAuthHeaders(null);\n    window.location.reload();\n};\n\nexport const getLogin = () => {\n    const token = localStorage.getItem('token');\n    if (token === 'undefined') return false;\n    if (!token) return false;\n    const base64Url = token.split('.')[1];\n    const base64 = base64Url.replace('-', '+').replace('_', '/');\n    return JSON.parse(window.atob(base64)).sub;\n};"]},"metadata":{},"sourceType":"module"}